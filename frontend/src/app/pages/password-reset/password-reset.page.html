<section class="password-reset" aria-labelledby="password-reset-title">
  <header>
    <h2 id="password-reset-title">Alterar senha de acesso</h2>
    <p>Mantenha sua conta protegida atualizando a senha regularmente. Informe a senha atual e defina uma nova combinação com pelo menos 8 caracteres.</p>
  </header>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <div class="form-group">
      <label for="current_password">Senha atual</label>
      <input
        id="current_password"
        type="password"
        autocomplete="current-password"
        formControlName="current_password"
        [class.invalid]="form.controls.current_password.invalid && form.controls.current_password.touched"
        required
      />
      <small *ngIf="form.controls.current_password.invalid && form.controls.current_password.touched">
        Informe a senha atual.
      </small>
    </div>

    <div class="form-group">
      <label for="new_password">Nova senha</label>
      <input
        id="new_password"
        type="password"
        autocomplete="new-password"
        formControlName="new_password"
        minlength="8"
        [class.invalid]="form.controls.new_password.invalid && form.controls.new_password.touched"
        required
      />
      <small *ngIf="form.controls.new_password.invalid && form.controls.new_password.touched">
        A nova senha deve ter no mínimo 8 caracteres.
      </small>
    </div>

    <div class="form-group">
      <label for="new_password_confirm">Confirmar nova senha</label>
      <input
        id="new_password_confirm"
        type="password"
        autocomplete="new-password"
        formControlName="new_password_confirm"
        [class.invalid]="form.controls.new_password_confirm.invalid && form.controls.new_password_confirm.touched"
        required
      />
      <small *ngIf="form.controls.new_password_confirm.invalid && form.controls.new_password_confirm.touched">
        Confirme a nova senha.
      </small>
    </div>

    <button type="submit" [disabled]="loading()">
      {{ loading() ? 'Salvando...' : 'Atualizar senha' }}
    </button>
  </form>
</section>
